{% extends 'dashboard/base_dashboard.html' %}

{% block title %}User Management{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-4">User Management</h1>

<form method="get" class="mb-4">
    <input type="text" name="q" value="{{ query }}" placeholder="Search" class="border p-2 rounded" />
    <button type="submit" class="px-4 py-2 bg-blue-500 text-white rounded">Filter</button>
</form>

<div class="overflow-x-auto">
    <table class="min-w-full bg-white rounded shadow">
        <thead>
            <tr>
                <th class="px-4 py-2 text-left">Name</th>
                <th class="px-4 py-2 text-left">Email</th>
                <th class="px-4 py-2 text-left">Phone</th>
                <th class="px-4 py-2">Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for user in users %}
            <tr class="border-t">
                <td class="px-4 py-2">{{ user.name }}</td>
                <td class="px-4 py-2">{{ user.email }}</td>
                <td class="px-4 py-2">{{ user.telefone_celular }}</td>
                <td class="px-4 py-2 text-center space-x-2">
                    <a href="{% url 'user_detail' user.id %}" class="text-blue-600">View</a>
                    <a href="{% url 'user_delete' user.id %}" class="text-red-600">Delete</a>
                </td>
            </tr>
            {% empty %}
            <tr><td colspan="4" class="px-4 py-2 text-center">No users found.</td></tr>
            {% endfor %}
        </tbody>
    </table>
</div>

<div class="mt-4 flex justify-center space-x-2">
    {% if users.has_previous %}
        <a href="?q={{ query }}&page={{ users.previous_page_number }}" class="px-3 py-1 border rounded">Prev</a>
    {% endif %}
    <span class="px-3 py-1">Page {{ users.number }} of {{ users.paginator.num_pages }}</span>
    {% if users.has_next %}
        <a href="?q={{ query }}&page={{ users.next_page_number }}" class="px-3 py-1 border rounded">Next</a>
    {% endif %}
</div>

{% endblock %}
